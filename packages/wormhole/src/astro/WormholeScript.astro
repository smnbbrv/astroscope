---
interface Props {
  wormhole: { readonly name: string; readonly key: string; get(): unknown };
}

const { wormhole } = Astro.props;
const data = wormhole.get();
const key = wormhole.key;
---

{
  data ? (
    <script is:inline define:vars={{ data, key }}>
      globalThis[key] = function(){return data;}
    </script>
  ) : (
    <script is:inline define:vars={{ wormholeName: wormhole.name }}>
      console.error(`[wormhole] "${wormholeName}" has no data â€” is the middleware configured?`);
    </script>
  )
}
